[1 Demo介绍](#1)  


[2 API介绍](#2)  


&emsp;[2.1 speechSynthesis](#2-1)  


&emsp;[2.2 SpeechSynthesisUtterance](#2-2)  


[3 实现步骤](#3)  

articleLine

## <span id="1" class="title">1 Demo介绍</span>
&emsp;&emsp;使用了speechSynthesisAPI直接在网页中实现文字转语言效果。界面布局采用bootstrap框架快速构建，不作为重点。语音效果无法展示，需要的可以直接下载[源码](https://github.com/c121914yu/learn/tree/textTOvoice)
![界面效果](https://img-blog.csdnimg.cn/20200313140322632.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lqbHRvcA==,size_16,color_FFFFFF,t_70)

## <span id="2" class="title">2 API介绍</span>
### <span id="2-1" class="title">2.1 speechSynthesis</span>
>*  **方法**
>* window.speechSynthesis 实例化对象  
>* speak(SpeechSynthesisUtterance)-接受一个SpeechSynthesisUtterance对象进行语言播放。  
>* cancel() - 删除队列中的所有语言  
>* pause() - 暂停播放的语言  
>* resume() - 将暂停的语言恢复播放  
>* getVoices() - 获取到浏览器支持的语言列表
>* **属性**默认均为false
>* pending - boolean 判断是否有未开始播放的语言  
>* speaking - boolean 判断是否正在播放  
>* paused - boolean 判断是否暂停

### <span id="2-2" class="title">2.2 SpeechSynthesisUtterance</span>
```js
// 实例化对象，传入文本内容
const speakText = new SpeechSynthesisUtterance(text)
```
*  **事件**
* onstart - 开始播放时触发  
* onend - 结束播放  
* onerror - 错误  
* onpause - 暂停  
* onresume - 重新播放  
* onboundary - 当播放完一个单词或一句句子时触发  
* onmark - 播放到标记时触发
* **属性**
* voice - 选择语言（前面getVoices里的元素）
* rate - 语速 （0-10）
* pitch - 音调（0-2）
* volume - 声音大小（0-1）

## <span id="3" class="title">3 实现步骤</span>
```js
// 1 实例化speechSynthesis
var synth = window.speechSynthesis
// 2 获取到支持的语言
// 由于getVoices是异步的，在网上找到这个方法，不是很清楚原理
if(synth.onvoiceschanged !== undefined)
  var voices = synth.getVoices()
// 3 实例化SpeechSynthesisUtterance
const speakText = new SpeechSynthesisUtterance(text)
//4 设置音速，语调，音量等属性
speakText.rate = rate
speakText.pitch = pitch
speakText.volume = 1
// 5 播放
synth.speak(speakText)
```
上述是基本的播放步骤，需要事件监听的可以再完善进去。
