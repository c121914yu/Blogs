[1 css动画语法](#1)  


[2 博客中的动画](#2)  


&emsp;[2.1 加载动画](#2-1)  


&emsp;[2.2 移动进出](#2-2)  


&emsp;[2.3 Hover动画](#2-3)  
 

[3 后话](#3)  


articleLine


## <span id="1" class="title">1 css动画语法</span>
在css中主要有两种实现动画的方法：  
一.  transition [完整语法](https://www.w3school.com.cn/cssref/pr_transition.asp)  
&emsp;&emsp;简单来说transition可以设置DOM元素从一种状态变化到另一种状态的过程，例如：变化时间，速度曲线……默认为0s，也就是瞬间变化。所以想通过transition实现动画效果需要有三个步骤：  
&emsp;&emsp;1. 给元素添加transition属性  
&emsp;&emsp;2. 添加元素需要变化的属性的默认值（大小，位置，透明度等）  
&emsp;&emsp;3. 改变元素的属性值  
二. animation [完整语法](https://www.w3school.com.cn/cssref/pr_animation.asp)  
&emsp;&emsp;animation可以看做是提前设置好动画效果然后在需要使用动画的时候将动画赋给DOM元素。实现动画需要两个步骤：  
&emsp;&emsp;1. 设置动画，在css中使用@keyframes name{}的方式创建动画  
&emsp;&emsp;2. 给元素添加animation : name ....;样式    
- - - 
补充：transform ：令元素进行一些2d/3d变化
- - -
## <span id="2" class="title">2 博客中的动画</span>
&emsp;&emsp;博客中动画基本是使用的transition的形式，只有加载动画用到了animation，为了统一动画速度设置了全局的动画时间。
```css
  --hover-speed : .4s ease-out;
  --transition-speed : .8s;
```
### <span id="2-1" class="title">2.1 加载动画</span>
![加载动画](https://imgconvert.csdnimg.cn/aHR0cDovLzQ5LjIzMi4zOC4xMTMvaW1nLzE1ODI4OTkwNzkwMDAuZ2lm)  
如果加载慢的话会看到这个动画。。

```bash
<template>
  <div class="loading">
    <div class="load">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
</template>

<style scoped>
.loading{
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #FFFFFF;
  z-index: 99999;
}
.loading .load{
  display: flex;
}

.loading .load span{
  background-color: purple;
  width: 0;
  height: 0;
  border-radius: 50%;
  margin: 0 8px;
  animation: bounce 0.6s infinite alternate;
  transform: translateY(0);
}
.loading .load span:nth-child(2){
  background-color: palevioletred;
  animation-delay: 0.2s;
}
.loading .load span:nth-child(3){
  animation-delay: 0.4s;
}

@keyframes bounce{
  to{
    width: 16px;
    height: 16px;
    transform: translateY(-16px);
  }
}
</style>
```
整体思路就是将3个球依次放大缩小，同时在Y轴上进行偏移。
1. 通过loading外层标签将动画脱离文档并全屏铺满遮挡住其他元素。并是通过fles布局将可视内容）（3个球）水平垂直居中。  
2. load标签同样使用flex布局使3个span标签排成一排。  
3. span标签设置默认属性，即width=0,height=0,Y=0，这些属性放在动画中的0%或from中也可以，但是我比较习惯把默认样式放在类的样式中。
4. **infinite** 定义动画可以重复执行，**alternate** 定义动画轮回播放，也就是width从0到16需要0.6s，再从16回到0需要0.6s，需要定义了**infinite** 才有效，如果没定义**alternate** 则width从0到16需要0.6s，从16回到0需要0s。
5. 设置后两个球动画依次延迟0.2s（0.6/3=0.2）
6. translateY将元素在Y轴上做偏移  

### <span id="2-2" class="title">2.2 移动进出</span>
&emsp;&emsp;在移动端可以点击导航条左侧的图标打开侧边折叠栏，侧边折叠的一种思路就是通过移动进出的方式实现，其主要用于移动端设计，解决屏幕宽度较小的问题。  当然也可以通过改变宽度或高度来实现。  
&emsp;&emsp;另外除了可以从两边进入，也可以从上方/下方进入。如果你仔细观察，可以发现主界面进入时logo跟文字会由上至下进入，而博客列表会从下往上进入。  
&emsp;&emsp;通常移动的动画都是通过transition来实现的，可以通过点击，触碰，加载时等多种方式触发。  
<center>侧边面板动画</center>  

```html
<div class="nav">
	<wrapper class="wrapper"></wrapper>
</div>
```
```javascript
routeChange(){//监听路由变化函数
	document.querySelector('.nav .wrapper').style.transform = "translateX(-100%)"
}
mounted() {
    this.routeChange()
    window.onclick = (e) => {
      //判断点击了图标打开侧边栏
      if(document.querySelector('.nav .icon-nav').contains(e.target))
        document.querySelector('.nav .wrapper').style.transform = "translateX(0)"
      //若点击侧边栏外的区域则关闭侧边栏
      else if(!document.querySelector('.nav .wrapper').contains(e.target))
        document.querySelector('.nav .wrapper').style.transform = "translateX(-100%)"
    }
  }
```

```css
.nav .wrapper{
  z-index: 999;
  position: fixed;
  left: 0;
  top: 0;
  width: 60%;
  height: 100%;
  padding: 20px 5px;
  transition: var(--transition-speed);
}
```
思路：
1. 将DOM的起点定在屏幕左上角。  
2. 将侧边导航栏的X轴向负方向偏移100%，translateX是以DOM的最左边为起点计算，100%代表整个DOM的宽度，相当于DOM的起点不再是左上角而是-DOM宽度，因此DOM会隐藏在左侧。  
3. 然后通过点击图标使得translateX变成0，此时DOM的原点又变成了屏幕左上角，并且是有变化时间的，于是就可以看到侧边栏从左侧进入的效果。  
4. 退出的原理也类似，将原点从屏幕左上角变成-DOM宽度。

### <span id="2-3" class="title">2.3 Hover动画</span>
&emsp;&emsp;hover动画是PC端常用的动画，通常是用来提示用户这个DOM是可以交互的。博客中大部分可点击的地方都加入和hover动画，主要有放大，位置偏移，颜色变化，其原理都相同，都是给元素设置了transition属性，并在hover属性中改变元素样式从而实现效果。这里用标签界面的标签hover动画做分析：
```html
<router-link
	class="item"
	:class="index===current?'current':''"
	:style="bgcolors[index]"
	v-for="(tag,index) in tags"
	:key="index"
	:to="'/tags/'+tag"
>
	{{tag === "all" ? "全部" : tag}}
</router-link>
```

```css
.item{
  transition: .1s;
}
.item:hover{
  transform: translateY(-3px);
}
.item.current{
  transform: scale(1.2);
}
```
&emsp;&emsp;一些固定的样式我删掉了，这个hover效果是让鼠标触碰到的标签向上位移3px距离，因为位移较短所以单独设置了个时间，如果时间太长的话就没有弹跳的效果了，当然不设置时间也差不多。  
&emsp;&emsp;DOM是用了vue的for来循环渲染多个标签，然后还通过的三目运算来判断当前界面选中的分类，给予它current的类名，current里scale()可以调节DOM的缩放比例，使当前选中的标签放大1.2倍与其他未选择的标签进行区分。  
## <span id="3" class="title">3 后话</span>
&emsp;&emsp;上面列举的3种动画方式基本覆盖了博客的所以动画效果，原理都差不多，稍微想下变化前跟变化后的效果，有必要的话再计算下时间就可以了。更多的动画放在以后的Demo中再说了。
